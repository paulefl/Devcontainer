version: "3.9"

services:
  dev:
    build:
      context: ..
      dockerfile: .devcontainer/Dockerfile

    container_name: devcontainer-podman

    # Workspace Mount (SELinux-safe)
    volumes:
      - ..:/workspace:Z

    working_dir: /workspace

    # Rootless Podman + User Mapping
    userns_mode: "keep-id"

    security_opt:
      - label=disable

    tty: true
    stdin_open: true
